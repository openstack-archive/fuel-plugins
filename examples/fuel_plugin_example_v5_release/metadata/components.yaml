- name: hypervisor:qemu
  default: true
  bind: !!pairs
    - "settings:common.libvirt_type.value": "qemu"
  weight: 5
  label: "dialog.create_cluster_wizard.compute.qemu"
  description: "dialog.create_cluster_wizard.compute.qemu_description"
  compatible:
    - name: hypervisor:vmware
- name: hypervisor:vmware
  weight: 15
  bind:
    - "settings:common.use_vcenter.value"
  label: "dialog.create_cluster_wizard.compute.vcenter"
  description: "dialog.create_cluster_wizard.compute.vcenter_description"
  compatible:
    - name: hypervisor:qemu
  requires:
    - one_of:
        items:
          - hypervisor:qemu
        message: "dialog.create_cluster_wizard.compute.vcenter_warning"
    - one_of:
        items:
          - network:neutron:ml2:dvs
          - network:neutron:ml2:nsx
        message: "dialog.create_cluster_wizard.compute.vcenter_requires_network_backend"
        message_invalid: "dialog.create_cluster_wizard.compute.vcenter_requires_network_plugins"
- name: network:neutron:core:ml2
  default: true
  weight: 1000
  label: "dialog.create_cluster_wizard.network.neutron_ml2"
  description: "dialog.create_cluster_wizard.network.neutron_ml2_description"
  compatible:
    - name: hypervisor:*
    - name: network:neutron:ml2:*
- name: network:neutron:ml2:vlan
  default: true
  bind: !!pairs
    - "cluster:net_provider": "neutron"
    - "cluster:net_segment_type": "vlan"
  weight: 5
  label: "common.network.neutron_vlan"
  description: "dialog.create_cluster_wizard.network.neutron_vlan_description"
  incompatible:
    - name: network:neutron:ml2:tun
      message: "dialog.create_cluster_wizard.network.vlan_tun_alert"
  compatible:
    - name: network:neutron:core:ml2
    - name: hypervisor:qemu
    - name: hypervisor:vmware
  requires:
    - one_of:
        items:
          - network:neutron:core:ml2
- name: network:neutron:ml2:tun
  bind: !!pairs
   - "cluster:net_provider": "neutron"
   - "cluster:net_segment_type": "tun"
  weight: 10
  label: "common.network.neutron_tun"
  description: "dialog.create_cluster_wizard.network.neutron_tun_description"
  compatible:
    - name: network:neutron:core:ml2
    - name: hypervisor:qemu
  incompatible:
    - name: network:neutron:ml2:vlan
      message: "dialog.create_cluster_wizard.network.vlan_tun_alert"
    - name: hypervisor:vmware
      message: "dialog.create_cluster_wizard.network.hypervisor_alert"
    - name: additional_service:ironic
      message: "dialog.create_cluster_wizard.additional.ironic_network_mode_alert"
  requires:
    - one_of:
        items:
          - network:neutron:core:ml2
- name: storage:block:lvm
  label: "dialog.create_cluster_wizard.storage.lvm"
  description: "dialog.create_cluster_wizard.storage.default_provider"
  default: true
  weight: 5
  bind:
    - "settings:storage.volumes_lvm.value"
  compatible:
    - name: hypervisor:qemu
    - name: hypervisor:vmware
    - name: network:neutron:core:ml2
    - name: network:neutron:ml2:vlan
    - name: network:neutron:ml2:tun
  incompatible:
    - name: storage:block:ceph
      message: "LVM not compatible with Ceph"
- name: storage:block:ceph
  label: "dialog.create_cluster_wizard.storage.ceph"
  description: "dialog.create_cluster_wizard.storage.ceph_block"
  weight: 10
  bind: !!pairs
    - "settings:storage.volumes_ceph.value": true
    - "settings:storage.volumes_lvm.value": false
  compatible:
    - name: hypervisor:qemu
    - name: hypervisor:vmware
    - name: network:neutron:core:ml2
    - name: network:neutron:ml2:vlan
    - name: network:neutron:ml2:tun
    - name: storage:object:ceph
    - name: storage:ephemeral:ceph
    - name: storage:image:ceph
  incompatible:
    - name: storage:block:lvm
      message: "Ceph not compatible with LVM"
- name: storage:object:ceph
  label: "dialog.create_cluster_wizard.storage.ceph"
  description: "dialog.create_cluster_wizard.storage.ceph_object"
  weight: 10
  bind:
    - "settings:storage.objects_ceph.value"
  compatible:
    - name: hypervisor:qemu
    - name: hypervisor:vmware
    - name: network:neutron:core:ml2
    - name: network:neutron:ml2:vlan
    - name: network:neutron:ml2:tun
    - name: storage:block:lvm
    - name: storage:block:ceph
    - name: storage:ephemeral:ceph
    - name: storage:image:ceph
- name: storage:ephemeral:ceph
  label: "dialog.create_cluster_wizard.storage.ceph"
  description: "dialog.create_cluster_wizard.storage.ceph_ephemeral"
  weight: 10
  bind:
    - "settings:storage.ephemeral_ceph.value"
  compatible:
    - name: hypervisor:qemu
    - name: hypervisor:vmware
    - name: network:neutron:core:ml2
    - name: network:neutron:ml2:vlan
    - name: network:neutron:ml2:tun
    - name: storage:block:lvm
    - name: storage:block:ceph
    - name: storage:object:ceph
    - name: storage:image:ceph
- name: storage:image:ceph
  label: "dialog.create_cluster_wizard.storage.ceph"
  description: "dialog.create_cluster_wizard.storage.ceph_image"
  weight: 10
  bind:
    - "settings:storage.images_ceph.value"
  compatible:
    - name: hypervisor:qemu
    - name: hypervisor:vmware
    - name: network:neutron:core:ml2
    - name: network:neutron:ml2:vlan
    - name: network:neutron:ml2:tun
    - name: storage:block:lvm
    - name: storage:block:ceph
    - name: storage:object:ceph
    - name: storage:ephemeral:ceph
- name: additional_service:sahara
  bind:
    - "settings:additional_components.sahara.value"
  weight: 10
  label: "dialog.create_cluster_wizard.additional.install_sahara"
  description: "dialog.create_cluster_wizard.additional.install_sahara_description"
  compatible:
    - name: hypervisor:qemu
    - name: hypervisor:vmware
    - name: network:neutron:core:ml2
    - name: network:neutron:ml2:vlan
    - name: network:neutron:ml2:tun
    - name: storage:block:lvm
    - name: storage:block:ceph
    - name: storage:object:ceph
    - name: storage:ephemeral:ceph
    - name: storage:image:ceph
    - name: additional_service:sahara
    - name: additional_service:murano
    - name: additional_service:ceilometer
    - name: additional_service:ironic
- name: additional_service:murano
  bind:
    - "settings:additional_components.murano.value"
  weight: 20
  label: "dialog.create_cluster_wizard.additional.install_murano"
  description: "dialog.create_cluster_wizard.additional.install_murano_description"
  compatible:
    - name: hypervisor:qemu
    - name: hypervisor:vmware
    - name: network:neutron:core:ml2
    - name: network:neutron:ml2:vlan
    - name: network:neutron:ml2:tun
    - name: storage:block:lvm
    - name: storage:block:ceph
    - name: storage:object:ceph
    - name: storage:ephemeral:ceph
    - name: storage:image:ceph
    - name: additional_service:sahara
    - name: additional_service:ceilometer
    - name: additional_service:ironic
- name: additional_service:ceilometer
  bind:
    - "settings:additional_components.ceilometer.value"
  weight: 30
  label: "dialog.create_cluster_wizard.additional.install_ceilometer"
  description: "dialog.create_cluster_wizard.additional.install_ceilometer_description"
  compatible:
    - name: hypervisor:qemu
    - name: hypervisor:vmware
    - name: network:neutron:core:ml2
    - name: network:neutron:ml2:vlan
    - name: network:neutron:ml2:tun
    - name: storage:block:lvm
    - name: storage:block:ceph
    - name: storage:object:ceph
    - name: storage:ephemeral:ceph
    - name: storage:image:ceph
    - name: additional_service:sahara
    - name: additional_service:murano
    - name: additional_service:ironic
- name: additional_service:ironic
  bind:
    - "settings:additional_components.ironic.value"
  weight: 40
  label: "dialog.create_cluster_wizard.additional.install_ironic"
  description: "dialog.create_cluster_wizard.additional.install_ironic_description"
  compatible:
    - name: hypervisor:qemu
    - name: network:neutron:core:ml2
    - name: network:neutron:ml2:vlan
    - name: storage:block:lvm
    - name: storage:block:ceph
    - name: storage:object:ceph
    - name: storage:ephemeral:ceph
    - name: storage:image:ceph
    - name: additional_service:sahara
    - name: additional_service:murano
    - name: additional_service:ceilometer
  incompatible:
    - name: network:neutron:ml2:tun
      message: "dialog.create_cluster_wizard.additional.ironic_network_mode_alert"